<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Google Auth</title>
  <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>
  <style>
    button{
      border:none;
      padding:5px;
      border-radius: 10px;
    }
    button:hover{
      background-color: rgb(46, 115, 233);
      color:white;
    }
    
  </style>
<body>
  <button id="theme-switch">
  <!-- Light mode icon (sun) -->
  <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24">
    <path d="M12 4.5q-.425 0-.713-.288Q11 3.925 11 3.5V2q0-.425.287-.713Q11.575 1 12 1t.713.287Q13 1.575 13 2v1.5q0 .425-.287.712Q12.425 4.5 12 4.5Zm6.225 2.725q-.275-.275-.275-.7 0-.425.275-.7l1.05-1.05q.275-.275.7-.275.425 0 .7.275t.275.7q0 .425-.275.7l-1.05 1.05q-.275.275-.7.275-.425 0-.7-.275ZM19.5 13q-.425 0-.712-.287Q18.5 12.425 18.5 12t.288-.713Q19.075 11 19.5 11H21q.425 0 .713.287Q22 11.575 22 12t-.287.713Q21.425 13 21 13ZM4.025 7.225 2.975 6.175Q2.7 5.9 2.7 5.475q0-.425.275-.7t.7-.275q.425 0 .7.275l1.05 1.05q.275.275.275.7 0 .425-.275.7t-.7.275q-.425 0-.7-.275ZM12 18.5q-.425 0-.713-.288Q11 17.925 11 17.5V21q0 .425.287.713Q11.575 22 12 22t.713-.287Q13 21.425 13 21v-3.5q0-.425-.287-.713Q12.425 18.5 12 18.5ZM4.5 13H3q-.425 0-.712-.287Q2 12.425 2 12t.288-.713Q2.575 11 3 11h1.5q.425 0 .712.287.288.288.288.713t-.288.713Q4.925 13 4.5 13Zm1.275 6.225q-.275-.275-.275-.7 0-.425.275-.7l1.05-1.05q.275-.275.7-.275.425 0 .7.275t.275.7q0 .425-.275.7l-1.05 1.05q-.275.275-.7.275-.425 0-.7-.275ZM12 17q2.075 0 3.537-1.462Q17 14.075 17 12t-1.463-3.538Q14.075 7 12 7t-3.538 1.462Q7 9.925 7 12t1.462 3.538Q9.925 17 12 17Zm0-2q-1.25 0-2.125-.875T9 12q0-1.25.875-2.125T12 9q1.25 0 2.125.875T15 12q0 1.25-.875 2.125T12 15Zm7.975 4.775q-.275.275-.7.275-.425 0-.7-.275l-1.05-1.05q-.275-.275-.275-.7 0-.425.275-.7t.7-.275q.425 0 .7.275l1.05 1.05q.275.275.275.7 0 .425-.275.7Z"/>
  </svg>

  <!-- Dark mode icon (moon) -->
  <svg xmlns="http://www.w3.org/2000/svg" height="24" width="24">
    <path d="M12.825 22Q10.05 22 8.025 20.075T6 15.15q0-2.575 1.55-4.575T11.525 8q-1.1 2.4-.375 4.85T14.9 16.8q1.775.85 3.65.65t3.475-1.25q-.65 2.675-2.837 4.238Q17 22 14.625 22Z"/>
  </svg>
</button>
<div class="wholeCode">
  <div>
  <p>To read the book : </p>
  <button id="signInButton">Sign In / Create Account</button>
  
  <div id="message" style="display:none;">
    You've successfully signed in as <span id="userName"></span>
  </div>
  <button id="signOutButton" style="display:none;">Sign Out</button>
    <a class="link" id="downloadLink" href="Three Short Novels.pdf" download style="display:none; margin-top: 10px;" >
  Read now
</a>
</div>
  
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
    import {
      getAuth,
      GoogleAuthProvider,
      signInWithPopup,
      signOut,
      onAuthStateChanged
    } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDMgy3n8q8zNI7vjDgyp6uGK8GsO_6WD94",
      authDomain: "auth-15581.firebaseapp.com",
      projectId: "auth-15581",
      storageBucket: "auth-15581.appspot.com",
      messagingSenderId: "63547976787",
      appId: "1:63547976787:web:fb05aaa54342d73b412aa6"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    const signInButton = document.getElementById("signInButton");
    const signOutButton = document.getElementById("signOutButton");
    const message = document.getElementById("message");
    const userName = document.getElementById("userName");
    const downloadLink = document.getElementById("downloadLink");

    signInButton.addEventListener("click", async () => {
      try {
        const result = await signInWithPopup(auth, provider);
        console.log("User signed in:", result.user.displayName);
      } catch (error) {
        console.error("Sign-in error:", error);
        alert("Error: " + error.message);
      }
    });

    signOutButton.addEventListener("click", async () => {
      try {
        await signOut(auth);
        alert("You have signed out.");
      } catch (error) {
        console.error("Sign-out error:", error);
      }
    });

    onAuthStateChanged(auth, (user) => {
      if (user) {
        signOutButton.style.display = "block";
        message.style.display = "block";
        userName.textContent = user.displayName;
        downloadLink.style.display = "inline";
      } else {
        signOutButton.style.display = "none";
        message.style.display = "none";
        userName.textContent = "";
        downloadLink.style.display = "none";
      }
    });
  </script>
  <script src="darkmode.js"></script>

</body>
</html>
